const{Client:Client,Message:Message,MessageEmbed:MessageEmbed}=require("discord.js-selfbot"),{send:send}=require("../../Utility/functions"),{enableEmbed:enableEmbed}=require("../../config.json");module.exports={name:"masskick",description:"Kicks All Possible Members!",run:async(e,i,s)=>{try{const s=(new MessageEmbed).setColor(e.color).setFooter(`Made by ${e.owner.tag}`,e.owner.displayAvatarURL({dynamic:!0})),{allowed:n}=e;if(!i.guild.me.permissions.has("KICK_MEMBERS"))return await i.channel.send("Missing **`KICK_MEMBERS`** Permission!");const t=(await i.guild.members.fetch()).filter((e=>!0===e.kickable));s.setDescription(`Total **${t.size}** Members Can be Kicked!\nReact with ✅ To Proceed!`);const a=await send(i,s);await a.react("✅");let c=!1;const o=(i,s)=>"✅"===i.emoji.name&&[...n,e.user.id].includes(s.id),r=await a.createReactionCollector(o,{time:15e3});r.on("collect",(async()=>{c=!0,a.reactions.removeAll().catch((()=>{})),t.map((e=>e.kick().catch((()=>{})))),s.setDescription(`Kicking **${t.size}** With Full Speeeed!`),a.edit(enableEmbed&&i.channel.permissionsFor(i.channel.guild.me).toArray().includes("EMBED_LINKS")?s:s.description).catch((()=>{}))})),r.on("end",(()=>{c||(a.reactions.removeAll().catch((()=>{})),s.setDescription("Timeout Reached!"),a.edit(enableEmbed&&i.channel.permissionsFor(i.channel.guild.me).toArray().includes("EMBED_LINKS")?s:s.description).catch((()=>{})))}))}catch(e){throw new Error(e)}}};